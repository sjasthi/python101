<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Operator Precedence - Interactive Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .precedence-table {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            overflow-x: auto;
        }

        .precedence-table h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        th {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            font-weight: bold;
        }

        .priority {
            font-weight: bold;
            color: #ff6b6b;
            text-align: center;
        }

        .operator-symbol {
            font-family: 'Courier New', monospace;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            margin: 2px;
            display: inline-block;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .example-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .example-card:hover {
            border-color: #ff6b6b;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.2);
        }

        .example-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .example-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .expression {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            margin: 10px 0;
            overflow-x: auto;
        }

        .step-by-step {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #ff6b6b;
            margin: 15px 0;
        }

        .step {
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }

        .final-result {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 12px;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
        }

        .interactive-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
        }

        .interactive-title {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .calculator {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .input-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .input-row input {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            width: 80px;
            text-align: center;
            transition: border-color 0.3s ease;
        }

        .input-row input:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .operator-select {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
        }

        .expression-display {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            margin: 20px 0;
            min-height: 50px;
            display: flex;
            align-items: center;
        }

        .steps-display {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            min-height: 100px;
        }

        .calculate-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: transform 0.2s ease;
            width: 100%;
            margin-top: 15px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
        }

        .quiz-section {
            background: linear-gradient(135deg, #f1f3f4 0%, #e8eaed 100%);
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
        }

        .quiz-question {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .quiz-input {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            width: 120px;
            margin-left: 10px;
        }

        .check-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-left: 10px;
            transition: transform 0.2s ease;
        }

        .check-btn:hover {
            transform: translateY(-2px);
        }

        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
        }

        .correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        @media (max-width: 768px) {
            .examples-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .input-row {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔢 Python Operator Precedence</h1>
            <p>Learn the order of operations and avoid calculation mistakes</p>
        </div>

        <div class="content">
            <!-- Precedence Table -->
            <div class="precedence-table">
                <h2>📋 Operator Precedence Table (Highest to Lowest)</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Priority</th>
                            <th>Operators</th>
                            <th>Description</th>
                            <th>Associativity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="priority">1</td>
                            <td><span class="operator-symbol">()</span></td>
                            <td>Parentheses</td>
                            <td>Left to Right</td>
                        </tr>
                        <tr>
                            <td class="priority">2</td>
                            <td><span class="operator-symbol">**</span></td>
                            <td>Exponentiation</td>
                            <td>Right to Left</td>
                        </tr>
                        <tr>
                            <td class="priority">3</td>
                            <td><span class="operator-symbol">*</span> <span class="operator-symbol">/</span> <span class="operator-symbol">//</span> <span class="operator-symbol">%</span></td>
                            <td>Multiplication, Division, Floor Division, Modulus</td>
                            <td>Left to Right</td>
                        </tr>
                        <tr>
                            <td class="priority">4</td>
                            <td><span class="operator-symbol">+</span> <span class="operator-symbol">-</span></td>
                            <td>Addition, Subtraction</td>
                            <td>Left to Right</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Examples Grid -->
            <div class="examples-grid" id="examplesGrid">
                <!-- Examples will be dynamically generated -->
            </div>

            <!-- Interactive Calculator -->
            <div class="interactive-section">
                <h2 class="interactive-title">🧮 Interactive Precedence Calculator</h2>
                <div class="calculator">
                    <div class="input-row">
                        <input type="number" id="num1" value="2" placeholder="Number">
                        <select class="operator-select" id="op1">
                            <option value="+">+</option>
                            <option value="-">-</option>
                            <option value="*" selected>*</option>
                            <option value="/">/</option>
                            <option value="//">//</option>
                            <option value="%">%</option>
                            <option value="**">**</option>
                        </select>
                        <input type="number" id="num2" value="3" placeholder="Number">
                        <select class="operator-select" id="op2">
                            <option value="+" selected>+</option>
                            <option value="-">-</option>
                            <option value="*">*</option>
                            <option value="/">/</option>
                            <option value="//">//</option>
                            <option value="%">%</option>
                            <option value="**">**</option>
                        </select>
                        <input type="number" id="num3" value="4" placeholder="Number">
                    </div>
                    
                    <div class="expression-display" id="expressionDisplay">
                        2 * 3 + 4
                    </div>
                    
                    <div class="steps-display" id="stepsDisplay">
                        Steps will appear here when you calculate...
                    </div>
                    
                    <button class="calculate-btn" onclick="calculateExpression()">🔍 Show Step-by-Step Solution</button>
                </div>
            </div>

            <!-- Quiz Section -->
            <div class="quiz-section">
                <h2 class="interactive-title">🧠 Test Your Precedence Knowledge</h2>
                <div id="quizContainer">
                    <!-- Quiz questions will be dynamically generated -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const examples = [
            {
                title: "Basic Addition vs Multiplication",
                expression: "2 + 3 * 4",
                steps: [
                    "Original: 2 + 3 * 4",
                    "Step 1: 3 * 4 = 12 (multiplication first)",
                    "Step 2: 2 + 12 = 14"
                ],
                result: 14,
                explanation: "Multiplication has higher precedence than addition, so 3 * 4 is calculated first."
            },
            {
                title: "Parentheses Override Precedence",
                expression: "(2 + 3) * 4",
                steps: [
                    "Original: (2 + 3) * 4",
                    "Step 1: (2 + 3) = 5 (parentheses first)",
                    "Step 2: 5 * 4 = 20"
                ],
                result: 20,
                explanation: "Parentheses have the highest precedence, so addition is performed first."
            },
            {
                title: "Exponentiation vs Multiplication",
                expression: "2 * 3 ** 2",
                steps: [
                    "Original: 2 * 3 ** 2",
                    "Step 1: 3 ** 2 = 9 (exponentiation first)",
                    "Step 2: 2 * 9 = 18"
                ],
                result: 18,
                explanation: "Exponentiation has higher precedence than multiplication."
            },
            {
                title: "Complex Expression",
                expression: "10 + 2 * 3 ** 2 - 8 / 4",
                steps: [
                    "Original: 10 + 2 * 3 ** 2 - 8 / 4",
                    "Step 1: 3 ** 2 = 9 (exponentiation first)",
                    "Step 2: 2 * 9 = 18 (multiplication)",
                    "Step 3: 8 / 4 = 2 (division)",
                    "Step 4: 10 + 18 - 2 = 26 (left to right)"
                ],
                result: 26,
                explanation: "Multiple precedence levels: exponentiation, then multiplication/division, then addition/subtraction."
            },
            {
                title: "Right-to-Left Exponentiation",
                expression: "2 ** 3 ** 2",
                steps: [
                    "Original: 2 ** 3 ** 2",
                    "Step 1: 3 ** 2 = 9 (right to left for **)",
                    "Step 2: 2 ** 9 = 512"
                ],
                result: 512,
                explanation: "Exponentiation is right-associative, so 3 ** 2 is calculated first."
            },
            {
                title: "Floor Division and Modulus",
                expression: "17 // 5 + 17 % 5",
                steps: [
                    "Original: 17 // 5 + 17 % 5",
                    "Step 1: 17 // 5 = 3 (floor division)",
                    "Step 2: 17 % 5 = 2 (modulus)",
                    "Step 3: 3 + 2 = 5"
                ],
                result: 5,
                explanation: "Floor division and modulus have same precedence as multiplication/division."
            }
        ];

        function createExampleCard(example) {
            const card = document.createElement('div');
            card.className = 'example-card';
            
            const stepsHtml = example.steps.map(step => `<div class="step">${step}</div>`).join('');
            
            card.innerHTML = `
                <div class="example-title">${example.title}</div>
                <div class="expression">${example.expression}</div>
                <div class="step-by-step">
                    <strong>Step-by-step solution:</strong>
                    ${stepsHtml}
                </div>
                <div class="final-result">Result: ${example.result}</div>
                <p style="margin-top: 15px; color: #666; font-style: italic;">${example.explanation}</p>
            `;
            
            return card;
        }

        function updateExpression() {
            const num1 = document.getElementById('num1').value || '0';
            const op1 = document.getElementById('op1').value;
            const num2 = document.getElementById('num2').value || '0';
            const op2 = document.getElementById('op2').value;
            const num3 = document.getElementById('num3').value || '0';
            
            const expression = `${num1} ${op1} ${num2} ${op2} ${num3}`;
            document.getElementById('expressionDisplay').textContent = expression;
        }

        function getPrecedence(operator) {
            const precedence = {
                '**': 4,
                '*': 3, '/': 3, '//': 3, '%': 3,
                '+': 2, '-': 2
            };
            return precedence[operator] || 1;
        }

        function calculateExpression() {
            const num1 = parseFloat(document.getElementById('num1').value) || 0;
            const op1 = document.getElementById('op1').value;
            const num2 = parseFloat(document.getElementById('num2').value) || 0;
            const op2 = document.getElementById('op2').value;
            const num3 = parseFloat(document.getElementById('num3').value) || 0;
            
            const expression = `${num1} ${op1} ${num2} ${op2} ${num3}`;
            let steps = [`Original: ${expression}`];
            
            let result;
            let step = 1;
            
            // Determine order based on precedence
            const prec1 = getPrecedence(op1);
            const prec2 = getPrecedence(op2);
            
            if (prec1 > prec2 || (prec1 === prec2 && op1 !== '**')) {
                // Calculate first operation first
                const intermediate = performOperation(num1, op1, num2);
                steps.push(`Step ${step++}: ${num1} ${op1} ${num2} = ${intermediate} (${getOperatorName(op1)} first)`);
                result = performOperation(intermediate, op2, num3);
                steps.push(`Step ${step++}: ${intermediate} ${op2} ${num3} = ${result}`);
            } else if (prec2 > prec1) {
                // Calculate second operation first
                const intermediate = performOperation(num2, op2, num3);
                steps.push(`Step ${step++}: ${num2} ${op2} ${num3} = ${intermediate} (${getOperatorName(op2)} first)`);
                result = performOperation(num1, op1, intermediate);
                steps.push(`Step ${step++}: ${num1} ${op1} ${intermediate} = ${result}`);
            } else {
                // Same precedence, check for right-associativity (**)
                if (op1 === '**' && op2 === '**') {
                    const intermediate = performOperation(num2, op2, num3);
                    steps.push(`Step ${step++}: ${num2} ${op2} ${num3} = ${intermediate} (exponentiation is right-associative)`);
                    result = performOperation(num1, op1, intermediate);
                    steps.push(`Step ${step++}: ${num1} ${op1} ${intermediate} = ${result}`);
                } else {
                    // Left to right
                    const intermediate = performOperation(num1, op1, num2);
                    steps.push(`Step ${step++}: ${num1} ${op1} ${num2} = ${intermediate} (left to right)`);
                    result = performOperation(intermediate, op2, num3);
                    steps.push(`Step ${step++}: ${intermediate} ${op2} ${num3} = ${result}`);
                }
            }
            
            const stepsDisplay = document.getElementById('stepsDisplay');
            stepsDisplay.innerHTML = `
                <strong>Step-by-step solution:</strong><br>
                ${steps.map(step => `<div class="step" style="margin: 5px 0; padding: 5px; background: white; border-radius: 4px;">${step}</div>`).join('')}
                <div style="margin-top: 15px; padding: 10px; background: #d4edda; color: #155724; border-radius: 8px; font-weight: bold; text-align: center;">
                    Final Result: ${result}
                </div>
            `;
        }

        function performOperation(a, op, b) {
            switch(op) {
                case '+': return a + b;
                case '-': return a - b;
                case '*': return a * b;
                case '/': return b !== 0 ? a / b : 'Error';
                case '//': return b !== 0 ? Math.floor(a / b) : 'Error';
                case '%': return b !== 0 ? a % b : 'Error';
                case '**': return Math.pow(a, b);
                default: return 0;
            }
        }

        function getOperatorName(op) {
            const names = {
                '+': 'addition',
                '-': 'subtraction',
                '*': 'multiplication',
                '/': 'division',
                '//': 'floor division',
                '%': 'modulus',
                '**': 'exponentiation'
            };
            return names[op] || 'operation';
        }

        function generateQuizQuestions() {
            const questions = [
                { question: "5 + 2 * 3 = ?", answer: 11 },
                { question: "(5 + 2) * 3 = ?", answer: 21 },
                { question: "2 ** 3 * 4 = ?", answer: 32 },
                { question: "20 - 3 * 2 = ?", answer: 14 },
                { question: "2 * 3 ** 2 = ?", answer: 18 },
                { question: "10 / 2 + 3 = ?", answer: 8 }
            ];

            const quizContainer = document.getElementById('quizContainer');
            
            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.innerHTML = `
                    <span style="font-size: 1.2rem; font-weight: bold;">${q.question}</span>
                    <input type="number" class="quiz-input" id="quiz_${index}" placeholder="Your answer">
                    <button class="check-btn" onclick="checkAnswer(${index}, ${q.answer})">Check</button>
                    <div class="feedback" id="feedback_${index}" style="display: none;"></div>
                `;
                quizContainer.appendChild(questionDiv);
            });
        }

        function checkAnswer(questionIndex, correctAnswer) {
            const userInput = document.getElementById(`quiz_${questionIndex}`);
            const feedback = document.getElementById(`feedback_${questionIndex}`);
            const userAnswer = parseFloat(userInput.value);
            
            feedback.style.display = 'block';
            
            if (userAnswer === correctAnswer) {
                feedback.className = 'feedback correct';
                feedback.textContent = '🎉 Correct! You understand operator precedence!';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = `❌ Incorrect. The correct answer is ${correctAnswer}. Remember the order of operations!`;
            }
        }

        // Initialize the page
        function init() {
            const examplesGrid = document.getElementById('examplesGrid');
            
            examples.forEach(example => {
                examplesGrid.appendChild(createExampleCard(example));
            });
            
            generateQuizQuestions();
            
            // Set up event listeners for the interactive calculator
            ['num1', 'num2', 'num3', 'op1', 'op2'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateExpression);
                document.getElementById(id).addEventListener('change', updateExpression);
            });
            
            updateExpression();
        }

        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
